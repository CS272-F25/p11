<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CoHabit â€” Household Setup</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <div data-component="navbar" data-page="household-setup"></div>
  
  <div class="page-header">
    <div class="container">
      <h1>ğŸ  Household Setup</h1>
      <p>Create a new household or join an existing one</p>
    </div>
  </div>

  <main class="container pb-5" id="household-setup-page">
    <div class="row justify-content-center">
      <div class="col-lg-10">
        
        <div class="row g-4">
          <!-- Create New Household -->
          <div class="col-md-6">
            <div class="card-custom h-100">
              <div class="card-header-custom">
                âœ¨ Create New Household
              </div>
              <div class="card-body p-4">
                <p class="text-muted mb-4">Start a new household and invite your roommates to join</p>
                
                <form id="create-household-form">
                  <div class="mb-3">
                    <label for="householdName" class="form-label">Household Name</label>
                    <input 
                      type="text" 
                      class="form-control" 
                      id="householdName" 
                      name="householdName"
                      placeholder="e.g., 123 Main St Apartment"
                      required
                    >
                    <small class="text-muted">Choose a name that helps identify your household</small>
                  </div>
                  
                  <button type="submit" class="btn btn-primary-custom w-100">
                    Create Household
                  </button>
                </form>
                
                <div id="create-success" class="alert alert-success mt-3" style="display: none;">
                  <h6 class="alert-heading">Household Created! ğŸ‰</h6>
                  <p class="mb-2">Your invite code is:</p>
                  <div class="d-flex align-items-center gap-2">
                    <code id="invite-code-display" class="flex-grow-1 p-2 bg-light rounded" style="font-size: 1.2rem; font-weight: bold;"></code>
                    <button class="btn btn-sm btn-outline-primary" id="copy-code-btn">
                      Copy
                    </button>
                  </div>
                  <small class="text-muted d-block mt-2">Share this code with your roommates so they can join</small>
                </div>
              </div>
            </div>
          </div>

          <!-- Join Existing Household -->
          <div class="col-md-6">
            <div class="card-custom h-100">
              <div class="card-header-custom">
                ğŸ”— Join Existing Household
              </div>
              <div class="card-body p-4">
                <p class="text-muted mb-4">Have an invite code? Join your roommates' household</p>
                
                <form id="join-household-form">
                  <div class="mb-3">
                    <label for="inviteCode" class="form-label">Invite Code</label>
                    <input 
                      type="text" 
                      class="form-control text-uppercase" 
                      id="inviteCode" 
                      name="inviteCode"
                      placeholder="Enter 6-character code"
                      maxlength="6"
                      pattern="[A-Za-z0-9]{6}"
                      required
                      style="letter-spacing: 0.2em; font-weight: bold;"
                    >
                    <small class="text-muted">Enter the code shared by your household admin</small>
                  </div>
                  
                  <button type="submit" class="btn btn-primary-custom w-100">
                    Join Household
                  </button>
                </form>
                
                <div id="join-success" class="alert alert-success mt-3" style="display: none;">
                  <h6 class="alert-heading">Successfully Joined! ğŸ‰</h6>
                  <p class="mb-0">You're now part of the household.</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Already in a household message -->
        <div id="already-in-household" class="alert alert-info mt-4" style="display: none;">
          <h5 class="alert-heading">You're Already in a Household</h5>
          <p class="mb-2">You're currently a member of: <strong id="current-household-name"></strong></p>
          <p class="mb-3">You can manage your household or leave to join a different one.</p>
          <div class="d-flex gap-2">
            <a href="/household.html" class="btn btn-primary">Manage Household</a>
            <button id="leave-household-btn" class="btn btn-outline-danger">Leave Household</button>
          </div>
        </div>

      </div>
    </div>
  </main>
  
  <div data-component="footer"></div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/components.js"></script>
  <script src="/js/utils/storage.js"></script>
  <script src="/js/utils/helpers.js"></script>
  <script type="module" src="/js/pages/household-setup.js"></script>
  <script src="/js/main.js"></script>
</body>
</html>
